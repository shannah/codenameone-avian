<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_06) on Fri Nov 23 18:11:59 PST 2012 -->
<title>CallSite (Java Platform SE 7 b00)</title>
<meta name="date" content="2012-11-23">
<meta name="keywords" content="java.lang.invoke.CallSite class">
<meta name="keywords" content="type()">
<meta name="keywords" content="getTarget()">
<meta name="keywords" content="setTarget()">
<meta name="keywords" content="dynamicInvoker()">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CallSite (Java Platform SE 7 b00)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div style="background-color: #EEEEEE"> <div style="padding: 6px; margin-top: 2px; margin-bottom: 6px; margin-left: 6px; margin-right: 6px; text-align: justify; font-size: 80%; font-family: Helvetica, Arial, sans-serif; font-weight: normal;"> Please note that the specifications and other information contained herein are not final and are subject to change. The information is being made available to you solely for purpose of evaluation. </div> </div>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CallSite.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em><strong>Java&trade;&nbsp;Platform<br>Standard&nbsp;Ed.&nbsp;7</strong><br><strong>DRAFT&nbsp;internal-b00</strong></em></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../java/lang/invoke/ConstantCallSite.html" title="class in java.lang.invoke"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?java/lang/invoke/CallSite.html" target="_top">Frames</a></li>
<li><a href="CallSite.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">java.lang.invoke</div>
<h2 title="Class CallSite" class="title">Class CallSite</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="../../../java/lang/Object.html" title="class in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>java.lang.invoke.CallSite</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../java/lang/invoke/ConstantCallSite.html" title="class in java.lang.invoke">ConstantCallSite</a>, <a href="../../../java/lang/invoke/MutableCallSite.html" title="class in java.lang.invoke">MutableCallSite</a>, <a href="../../../java/lang/invoke/VolatileCallSite.html" title="class in java.lang.invoke">VolatileCallSite</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">CallSite</span>
extends <a href="../../../java/lang/Object.html" title="class in java.lang">Object</a></pre>
<div class="block">A <code>CallSite</code> is a holder for a variable <a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a>,
 which is called its <code>target</code>.
 An <code>invokedynamic</code> instruction linked to a <code>CallSite</code> delegates
 all calls to the site's current target.
 A <code>CallSite</code> may be associated with several <code>invokedynamic</code>
 instructions, or it may be "free floating", associated with none.
 In any case, it may be invoked through an associated method handle
 called its <a href="../../../java/lang/invoke/CallSite.html#dynamicInvoker()">dynamic invoker</a>.
 <p>
 <code>CallSite</code> is an abstract class which does not allow
 direct subclassing by users.  It has three immediate,
 concrete subclasses that may be either instantiated or subclassed.
 <ul>
 <li>If a mutable target is not required, an <code>invokedynamic</code> instruction
 may be permanently bound by means of a <a href="../../../java/lang/invoke/ConstantCallSite.html" title="class in java.lang.invoke">constant call site</a>.
 <li>If a mutable target is required which has volatile variable semantics,
 because updates to the target must be immediately and reliably witnessed by other threads,
 a <a href="../../../java/lang/invoke/VolatileCallSite.html" title="class in java.lang.invoke">volatile call site</a> may be used.
 <li>Otherwise, if a mutable target is required,
 a <a href="../../../java/lang/invoke/MutableCallSite.html" title="class in java.lang.invoke">mutable call site</a> may be used.
 </ul>
 <p>
 A non-constant call site may be <em>relinked</em> by changing its target.
 The new target must have the same <a href="../../../java/lang/invoke/MethodHandle.html#type()">type</a>
 as the previous target.
 Thus, though a call site can be relinked to a series of
 successive targets, it cannot change its type.
 <p>
 Here is a sample use of call sites and bootstrap methods which links every
 dynamic call site to print its arguments:
<blockquote><pre><!-- see indy-demo/src/PrintArgsDemo.java -->
static void test() throws Throwable {
    // THE FOLLOWING LINE IS PSEUDOCODE FOR A JVM INSTRUCTION
    InvokeDynamic[#bootstrapDynamic].baz("baz arg", 2, 3.14);
}
private static void printArgs(Object... args) {
  System.out.println(java.util.Arrays.deepToString(args));
}
private static final MethodHandle printArgs;
static {
  MethodHandles.Lookup lookup = MethodHandles.lookup();
  Class thisClass = lookup.lookupClass();  // (who am I?)
  printArgs = lookup.findStatic(thisClass,
      "printArgs", MethodType.methodType(void.class, Object[].class));
}
private static CallSite bootstrapDynamic(MethodHandles.Lookup caller, String name, MethodType type) {
  // ignore caller and name, but match the type:
  return new ConstantCallSite(printArgs.asType(type));
}
</pre></blockquote></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract <a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/lang/invoke/CallSite.html#dynamicInvoker()">dynamicInvoker</a></strong>()</code>
<div class="block">Produces a method handle equivalent to an invokedynamic instruction
 which has been linked to this call site.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract <a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/lang/invoke/CallSite.html#getTarget()">getTarget</a></strong>()</code>
<div class="block">Returns the target method of the call site, according to the
 behavior defined by this call site's specific class.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../java/lang/invoke/CallSite.html#setTarget(java.lang.invoke.MethodHandle)">setTarget</a></strong>(<a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a>&nbsp;newTarget)</code>
<div class="block">Updates the target method of this call site, according to the
 behavior defined by this call site's specific class.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../java/lang/invoke/MethodType.html" title="class in java.lang.invoke">MethodType</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/lang/invoke/CallSite.html#type()">type</a></strong>()</code>
<div class="block">Returns the type of this call site's target.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="../../../java/lang/Object.html" title="class in java.lang">Object</a></h3>
<code><a href="../../../java/lang/Object.html#clone()">clone</a>, <a href="../../../java/lang/Object.html#equals(java.lang.Object)">equals</a>, <a href="../../../java/lang/Object.html#finalize()">finalize</a>, <a href="../../../java/lang/Object.html#getClass()">getClass</a>, <a href="../../../java/lang/Object.html#hashCode()">hashCode</a>, <a href="../../../java/lang/Object.html#notify()">notify</a>, <a href="../../../java/lang/Object.html#notifyAll()">notifyAll</a>, <a href="../../../java/lang/Object.html#toString()">toString</a>, <a href="../../../java/lang/Object.html#wait()">wait</a>, <a href="../../../java/lang/Object.html#wait(long)">wait</a>, <a href="../../../java/lang/Object.html#wait(long, int)">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="type()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>type</h4>
<pre>public&nbsp;<a href="../../../java/lang/invoke/MethodType.html" title="class in java.lang.invoke">MethodType</a>&nbsp;type()</pre>
<div class="block">Returns the type of this call site's target.
 Although targets may change, any call site's type is permanent, and can never change to an unequal type.
 The <code>setTarget</code> method enforces this invariant by refusing any new target that does
 not have the previous target's type.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the type of the current target, which is also the type of any future target</dd></dl>
</li>
</ul>
<a name="getTarget()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTarget</h4>
<pre>public abstract&nbsp;<a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a>&nbsp;getTarget()</pre>
<div class="block">Returns the target method of the call site, according to the
 behavior defined by this call site's specific class.
 The immediate subclasses of <code>CallSite</code> document the
 class-specific behaviors of this method.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the current linkage state of the call site, its target method handle</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../java/lang/invoke/ConstantCallSite.html" title="class in java.lang.invoke"><code>ConstantCallSite</code></a>, 
<a href="../../../java/lang/invoke/VolatileCallSite.html" title="class in java.lang.invoke"><code>VolatileCallSite</code></a>, 
<a href="../../../java/lang/invoke/CallSite.html#setTarget(java.lang.invoke.MethodHandle)"><code>setTarget(java.lang.invoke.MethodHandle)</code></a>, 
<a href="../../../java/lang/invoke/ConstantCallSite.html#getTarget()"><code>ConstantCallSite.getTarget()</code></a>, 
<a href="../../../java/lang/invoke/MutableCallSite.html#getTarget()"><code>MutableCallSite.getTarget()</code></a>, 
<a href="../../../java/lang/invoke/VolatileCallSite.html#getTarget()"><code>VolatileCallSite.getTarget()</code></a></dd></dl>
</li>
</ul>
<a name="setTarget(java.lang.invoke.MethodHandle)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTarget</h4>
<pre>public abstract&nbsp;void&nbsp;setTarget(<a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a>&nbsp;newTarget)</pre>
<div class="block">Updates the target method of this call site, according to the
 behavior defined by this call site's specific class.
 The immediate subclasses of <code>CallSite</code> document the
 class-specific behaviors of this method.
 <p>
 The type of the new target must be <a href="../../../java/lang/invoke/MethodType.html#equals(java.lang.Object)">equal to</a>
 the type of the old target.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>newTarget</code> - the new target</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../java/lang/NullPointerException.html" title="class in java.lang">NullPointerException</a></code> - if the proposed new target is null</dd>
<dd><code><a href="../../../java/lang/invoke/WrongMethodTypeException.html" title="class in java.lang.invoke">WrongMethodTypeException</a></code> - if the proposed new target
         has a method type that differs from the previous target</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../java/lang/invoke/CallSite.html#getTarget()"><code>getTarget()</code></a>, 
<a href="../../../java/lang/invoke/ConstantCallSite.html#setTarget(java.lang.invoke.MethodHandle)"><code>ConstantCallSite.setTarget(java.lang.invoke.MethodHandle)</code></a>, 
<a href="../../../java/lang/invoke/MutableCallSite.html#setTarget(java.lang.invoke.MethodHandle)"><code>MutableCallSite.setTarget(java.lang.invoke.MethodHandle)</code></a>, 
<a href="../../../java/lang/invoke/VolatileCallSite.html#setTarget(java.lang.invoke.MethodHandle)"><code>VolatileCallSite.setTarget(java.lang.invoke.MethodHandle)</code></a></dd></dl>
</li>
</ul>
<a name="dynamicInvoker()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>dynamicInvoker</h4>
<pre>public abstract&nbsp;<a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a>&nbsp;dynamicInvoker()</pre>
<div class="block">Produces a method handle equivalent to an invokedynamic instruction
 which has been linked to this call site.
 <p>
 This method is equivalent to the following code:
 <blockquote><pre>
 MethodHandle getTarget, invoker, result;
 getTarget = MethodHandles.publicLookup().bind(this, "getTarget", MethodType.methodType(MethodHandle.class));
 invoker = MethodHandles.exactInvoker(this.type());
 result = MethodHandles.foldArguments(invoker, getTarget)
 </pre></blockquote></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a method handle which always invokes this call site's current target</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CallSite.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em><strong>Java&trade;&nbsp;Platform<br>Standard&nbsp;Ed.&nbsp;7</strong><br><strong>DRAFT&nbsp;internal-b00</strong></em></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../java/lang/invoke/ConstantCallSite.html" title="class in java.lang.invoke"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?java/lang/invoke/CallSite.html" target="_top">Frames</a></li>
<li><a href="CallSite.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><font size="-1"> <a href="http://bugreport.sun.com/bugreport/">Submit a bug or feature</a> <br>For further API reference and developer documentation, see <a href="http://docs.oracle.com/javase/7/docs/index.html" target="_blank">Java SE Documentation</a>. That documentation contains more detailed, developer-targeted descriptions, with conceptual overviews, definitions of terms, workarounds, and working code examples.<br> <a href="http://docs.oracle.com/javase/7/docs/legal/cpyr.html">Copyright</a> &#x00a9; 1993, 2012, Oracle and/or its affiliates.  All rights reserved. </font><br><strong>DRAFT&nbsp;internal-b00</strong></small></p>
</body>
</html>
